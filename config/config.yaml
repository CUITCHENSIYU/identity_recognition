# train, test, deploy
runner_type: deploy_runner
general:
    n_class: 8
    input_channel: 32
    batch_size: 1
    epoch: 20
    workspace: ./checkpoints

model:
    pipeline_name: hydranet
    backbone_name: resnet_50
    head_name: classify_head
    feature_dim: 512

data:
    mean: [1.37709322e-03, -1.25590711e-04, -9.78099246e-04, -1.54149900e-03,
           -3.65268857e-04, -8.14466175e-04,  2.03103179e-05, -5.70506880e-04,
           -1.06753382e-03, -6.38036276e-04,  4.43398198e-03, -4.42797880e-05,
           4.58709032e-03, -4.00574380e-04,  1.18625627e-04,  1.28054139e-03,
           -1.44552181e-03,  4.22923689e-03, -4.25630181e-04,  1.94065065e-03,
           -1.03658997e-03, -2.67863576e-04, -6.58665125e-04, -1.81927911e-04,
           -7.28778903e-04, -6.39883455e-04, -6.54817118e-03, -5.36829814e-04,
           -1.65058066e-03,  5.92751761e-03,  1.98298852e-03,  9.49096881e-04]
    std: [156.21795043, 169.71135015, 140.4069441,  136.95477891, 156.0404305,
          133.2414394,   72.3127324,  148.45542915, 126.45601414, 142.92104616,
          103.65128654, 100.07135721, 127.29811678, 123.69611457, 193.43011533,
          155.93406002, 156.41003176, 257.58660447, 129.15109456, 107.70340885,
          104.44757708, 101.69828631, 121.41448007, 192.81180237, 130.66332279,
          173.7997312,  233.96898104, 166.46676249, 141.72560624, 221.56806554,
          220.0013304,  306.79795205]
    
    # mean: [ 7205.98272722,  9464.85564928,  5403.63687359,   764.7010256,
    #         9012.66885274,  5992.30280084,  -146.11211749,  6771.39968291,
    #         1543.82412021,  6621.77471499,   224.93824389,  3581.9142273,
    #         2075.0800071,   6088.31171631, 11160.58234163,  9815.02891539,
    #         -7660.50333595, -4733.610806,    -896.7206408,  -3281.07175938,
    #         673.40195073,  1808.58631352,  3532.21234096,  6998.65733441,
    #         1361.90412702,  3207.29641024, -1582.22663258, -2914.09197265,
    #         -775.26440336, -3605.42221535, -3385.83435661,  -422.21587591]
    # std: [  8101.54081101,  8049.06389771,  8085.18352022, 10361.5317654,
    #         6623.64450765,  6839.57871742,  5830.78793925,  7867.58041484,
    #         8862.63930747,  6878.66016963,  7040.43599154,  6042.64984708,
    #         9027.63757485,  6018.46043959,  8052.89305649,  5453.49196177,
    #         8460.60547761, 14034.91422581,  8951.09293939,  7192.7257022,
    #         7387.11958272,  5789.65935505,  7526.43558818, 11019.5334316,
    #         8977.84810948, 11722.27259559,  8400.27222974, 11735.58297656,
    #         10252.90003284, 10830.12855681, 13437.41127708, 16329.26422988]
    win_size: 1000
    step_size: 100
    ssvep_cls_num: 4
    low_freq: 1
    high_freq: 30
    sample_rate: 1000
    enable_filter: false

class_id_map: {
    0: ["gjc1/by", "gjc2/by", "gjc3/by", "gjc4/by", "gjc5/by"],
    1: ["gjc1/ssvep", "gjc2/ssvep", "gjc3/ssvep", "gjc4/ssvep", "gjc5/ssvep"],
    2: ["wxr1/by", "wxr2/by", "wxr3/by", "wxr4/by", "wxr5/by"],
    3: ["wxr1/ssvep", "wxr2/ssvep", "wxr3/ssvep", "wxr4/ssvep", "wxr5/ssvep"],
    4: ["yl1/by", "yl2/by", "yl3/by", "yl4/by", "yl5/by"],
    5: ["yl1/ssvep", "yl2/ssvep", "yl3/ssvep", "yl4/ssvep", "yl5/ssvep"],
    6: ["zqy1/by", "zqy2/by", "zqy3/by", "zqy4/by", "zqy5/by"],
    7: ["zqy1/ssvep", "zqy2/ssvep", "zqy3/ssvep", "zqy4/ssvep", "zqy5/ssvep"]
}

optim.params:
  weight_decay: 1.e-5
evaluator:
    type: evaluator

train:
    type: base_trainer
    dataset_type: base_dataset
    dataset_path: ./data/train.jsonl
    optimizer: Adam
    initial_lr: 1.0e-4
    lr_strategy: Cosine
    criterions: NLLLoss #CELoss

val:
    dataset_path: ./data/val.jsonl

test:
    model_path: ./checkpoints/2024.04.27/11-0.7806.pt
    dataset_path: ./data/val.jsonl

inference:
    dataset_path: ./data/feature_file.jsonl
    model_path: ./checkpoints/2024-05-11_14-30/6-0.5482.onnx
    sample_size: 3
    feature_file: "./data/feature_file.jsonl"
    valid_identity: ["gjc", "wxr", "yl", "zqy"]
    conf_thres: 0.8
    static_num: 30
    identity_map: {
        "gjc": 0,
        "wxr": 1,
        "yl": 2,
        "zqy": 3
    }

deploy:
    model_path: ./checkpoints/2024-05-11_14-30/6-0.5482.pt



    
